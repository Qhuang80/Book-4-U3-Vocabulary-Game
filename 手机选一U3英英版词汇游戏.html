<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>黄老师 Vocabulary Game - Unit 3</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Arial', sans-serif;
        }
        
        body {
            background-image: url('https://youke1.picui.cn/s1/2025/09/09/68bfdc97de17f.png');
            background-size: cover;
            background-position: center;
            background-repeat: no-repeat;
            background-attachment: fixed;
            min-height: 100vh;
            color: white;
            overflow-x: hidden;
        }
        
        .container {
            max-width: 100%;
            margin: 0 auto;
            padding: 10px;
            min-height: 100vh;
            display: flex;
            flex-direction: column;
            justify-content: flex-start;
            align-items: center;
        }
        
        .game-title {
            font-size: 2.2rem;
            font-weight: bold;
            text-align: center;
            margin-bottom: 15px;
            text-shadow: 3px 3px 6px rgba(0, 0, 0, 0.8);
            color: #FFD700;
            animation: glow 2s ease-in-out infinite alternate;
        }
        
        @keyframes glow {
            from { text-shadow: 3px 3px 6px rgba(0, 0, 0, 0.8), 0 0 20px #FFD700; }
            to { text-shadow: 3px 3px 6px rgba(0, 0, 0, 0.8), 0 0 30px #FFD700, 0 0 40px #FFD700; }
        }
        
        .player-setup {
            background: rgba(0, 0, 0, 0.8);
            padding: 20px;
            border-radius: 15px;
            text-align: center;
            margin-bottom: 15px;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.5);
            width: 100%;
            max-width: 400px;
        }
        
        .player-setup h2 {
            font-size: 1.5rem;
            margin-bottom: 12px;
            color: #FFD700;
        }
        
        .player-setup input {
            width: 100%;
            max-width: 250px;
            padding: 12px;
            font-size: 1.1rem;
            border: none;
            border-radius: 25px;
            text-align: center;
            margin-bottom: 15px;
            background: rgba(255, 255, 255, 0.9);
            color: #333;
        }
        
        .btn {
            background: linear-gradient(45deg, #FF6B6B, #4ECDC4);
            color: white;
            border: none;
            padding: 15px 30px;
            font-size: 1.2rem;
            font-weight: bold;
            border-radius: 25px;
            cursor: pointer;
            transition: all 0.3s ease;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.3);
            margin: 8px;
            min-height: 50px;
            touch-action: manipulation;
        }
        
        .btn:hover {
            transform: translateY(-3px);
            box-shadow: 0 8px 20px rgba(0, 0, 0, 0.4);
        }
        
        .btn:active {
            transform: translateY(1px);
        }
        
        .game-area {
            display: none;
            width: 100%;
            max-width: 100%;
        }
        
        .game-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 15px;
            background: rgba(0, 0, 0, 0.8);
            padding: 12px;
            border-radius: 15px;
            flex-wrap: wrap;
            gap: 8px;
        }
        
        .progress-info {
            font-size: 1rem;
            color: #4ECDC4;
            text-align: center;
            font-weight: bold;
            background: rgba(78, 205, 196, 0.1);
            padding: 4px 8px;
            border-radius: 12px;
            border: 1px solid #4ECDC4;
        }
        
        .round-info {
            font-size: 1.2rem;
            font-weight: bold;
            color: #FFD700;
            text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.8);
            background: rgba(255, 215, 0, 0.1);
            padding: 4px 8px;
            border-radius: 15px;
            border: 2px solid #FFD700;
        }
        
        .timer {
            font-size: 1.4rem;
            font-weight: bold;
            color: #FF6B6B;
            background: rgba(255, 255, 255, 0.1);
            padding: 6px 12px;
            border-radius: 20px;
        }
        
        .score {
            font-size: 1.1rem;
            font-weight: bold;
            color: #4ECDC4;
        }
        
        .question-area {
            background: rgba(0, 0, 0, 0.8);
            padding: 15px;
            border-radius: 15px;
            margin-bottom: 15px;
            text-align: center;
        }
        
        .question-text {
            font-size: 1.3rem;
            font-weight: bold;
            margin-bottom: 10px;
            color: #FFD700;
            line-height: 1.3;
        }
        
        .phrase-hint {
            font-size: 1rem;
            color: #FF6B6B;
            font-style: italic;
            margin-top: 8px;
        }
        
        .options-grid {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 15px;
            max-width: 100%;
            margin: 0 auto;
            padding: 0 10px;
        }
        
        .option {
            background-image: url('https://youke1.picui.cn/s1/2025/09/09/68bfdcbab2bed.png');
            background-size: contain;
            background-repeat: no-repeat;
            background-position: center;
            width: 100%;
            max-width: 160px;
            height: 160px;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            transition: all 0.3s ease;
            position: relative;
            margin: 0 auto;
            touch-action: manipulation;
        }
        
        .option:hover {
            transform: scale(1.05);
        }
        
        .option-text {
            font-size: 1.1rem;
            font-weight: bold;
            color: #333;
            text-align: center;
            background: rgba(255, 255, 255, 0.95);
            padding: 2px 4px;
            border-radius: 6px;
            max-width: 120px;
            max-height: 80px;
            word-wrap: break-word;
            overflow: hidden;
            display: flex;
            align-items: center;
            justify-content: center;
            line-height: 1.0;
            box-shadow: 0 2px 8px rgba(0, 0, 0, 0.2);
            white-space: normal;
            hyphens: auto;
        }
        
        .option.correct {
            animation: correctAnswer 0.6s ease;
        }
        
        .option.incorrect {
            animation: incorrectAnswer 0.6s ease;
        }
        
        @keyframes correctAnswer {
            0% { transform: scale(1); }
            50% { transform: scale(1.1); }
            100% { transform: scale(1); }
        }
        
        @keyframes incorrectAnswer {
            0% { transform: translateX(0); }
            25% { transform: translateX(-8px); }
            75% { transform: translateX(8px); }
            100% { transform: translateX(0); }
        }
        
        .results {
            display: none;
            background: rgba(0, 0, 0, 0.9);
            padding: 30px;
            border-radius: 20px;
            text-align: center;
            max-width: 500px;
            margin: 0 auto;
        }
        
        .results h2 {
            font-size: 2.2rem;
            color: #FFD700;
            margin-bottom: 15px;
        }
        
        .player-name {
            font-size: 1.3rem;
            margin-bottom: 15px;
            color: #4ECDC4;
        }
        
        .final-score {
            font-size: 3rem;
            font-weight: bold;
            color: #FF6B6B;
            margin: 15px 0;
            text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.8);
        }
        
        .performance-message {
            font-size: 1.2rem;
            margin: 15px 0;
            padding: 12px;
            background: rgba(255, 255, 255, 0.1);
            border-radius: 10px;
        }
        
        .notification {
            position: fixed;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            background: rgba(0, 0, 0, 0.9);
            color: white;
            padding: 15px 30px;
            border-radius: 15px;
            font-size: 1.3rem;
            font-weight: bold;
            z-index: 1000;
            opacity: 0;
            transition: opacity 0.3s ease;
        }
        
        .round-completion {
            position: fixed;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            background: rgba(0, 0, 0, 0.95);
            color: white;
            padding: 30px;
            border-radius: 20px;
            font-size: 1.6rem;
            font-weight: bold;
            z-index: 1500;
            text-align: center;
            border: 3px solid #FFD700;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.8);
            display: none;
        }
        
        .round-completion.show {
            display: block;
        }
        
        .round-completion h3 {
            color: #FFD700;
            margin-bottom: 15px;
            font-size: 1.8rem;
        }
        
        .round-completion .round-score {
            color: #4ECDC4;
            margin: 12px 0;
            font-size: 1.3rem;
        }
        
        .round-completion .continue-btn {
            background: linear-gradient(45deg, #FF6B6B, #4ECDC4);
            color: white;
            border: none;
            padding: 12px 25px;
            font-size: 1.2rem;
            font-weight: bold;
            border-radius: 25px;
            cursor: pointer;
            margin-top: 15px;
            transition: all 0.3s ease;
        }
        
        .round-completion .continue-btn:hover {
            transform: translateY(-3px);
            box-shadow: 0 8px 20px rgba(0, 0, 0, 0.4);
        }
        
        .notification.show {
            opacity: 1;
        }
        
        .countdown {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.9);
            display: flex;
            justify-content: center;
            align-items: center;
            font-size: 4rem;
            font-weight: bold;
            color: #FFD700;
            z-index: 2000;
            display: none;
        }
        
        .countdown.show {
            display: flex;
        }
        
        .error-message {
            color: #FF6B6B;
            font-size: 1rem;
            margin-top: 8px;
            display: none;
        }
        
        @media (max-width: 768px) {
            .game-title {
                font-size: 1.8rem;
            }
            
            .options-grid {
                grid-template-columns: repeat(2, 1fr);
                gap: 10px;
                padding: 0 5px;
            }
            
            .option {
                max-width: 140px;
                height: 140px;
            }
            
            .option-text {
                font-size: 1rem;
                max-width: 100px;
                max-height: 70px;
            }
            
            .question-text {
                font-size: 1.1rem;
            }
            
            .game-header {
                flex-direction: column;
                gap: 8px;
                padding: 10px;
            }
            
            .container {
                padding: 5px;
            }
            
            .player-setup {
                padding: 15px;
                margin-bottom: 10px;
            }
            
            .player-setup h2 {
                font-size: 1.3rem;
            }
            
            .btn {
                padding: 12px 25px;
                font-size: 1.1rem;
                min-height: 45px;
            }
        }
        
        @media (max-width: 480px) {
            .game-title {
                font-size: 1.6rem;
            }
            
            .options-grid {
                gap: 8px;
                padding: 0 2px;
            }
            
            .option {
                max-width: 120px;
                height: 120px;
            }
            
            .option-text {
                font-size: 0.9rem;
                max-width: 90px;
                max-height: 60px;
            }
            
            .question-text {
                font-size: 1rem;
            }
            
            .round-info {
                font-size: 1rem;
            }
            
            .timer {
                font-size: 1.2rem;
            }
            
            .score {
                font-size: 1rem;
            }
        }
    </style>
</head>
<body>
    <div class="countdown" id="countdown">3</div>
    
    <div class="container">
        <h1 class="game-title">🐑 黄老师 Vocabulary Game 🐑</h1>
        
        <div class="player-setup" id="playerSetup">
            <h2>Enter Your Name</h2>
            <input type="text" id="playerName" placeholder="Your Name" maxlength="20">
            <br>
            <button class="btn" id="startGame">Start Game</button>
            <div class="error-message" id="errorMessage">Please enter your name to start!</div>
        </div>
        
        <div class="game-area" id="gameArea">
            <div class="game-header">
                <div class="round-info" id="roundInfo">Round 1 of 6</div>
                <div class="progress-info" id="progressInfo">Question 1 of 50</div>
                <div class="timer" id="timer">90</div>
                <div class="score" id="score">Score: 0</div>
            </div>
            
            <div class="question-area">
                <div class="question-text" id="questionText">Loading question...</div>
                <div class="phrase-hint" id="phraseHint" style="display: none;">(Phrase)</div>
            </div>
            
            <div class="options-grid" id="optionsGrid">
                <!-- Options will be generated here -->
            </div>
        </div>
        
        <div class="results" id="results">
            <h2>Game Complete! 🎉</h2>
            <div class="player-name" id="playerNameDisplay">Player: </div>
            <div class="final-score" id="finalScore">0</div>
            <div class="performance-message" id="performanceMessage">Great job!</div>
            <button class="btn" id="playAgain">Play Again</button>
        </div>
    </div>
    
    <div class="notification" id="notification"></div>
    
    <div class="round-completion" id="roundCompletion">
        <h3>🎉 Round Complete! 🎉</h3>
        <div style="font-size: 1.2rem; color: #FFD700; margin-bottom: 12px;">
            Player: <span id="playerNameInRound">Player Name</span>
        </div>
        <div class="round-score" id="roundScore">Round Score: 0</div>
        <div>Total Score: <span id="totalScore">0</span></div>
        <div style="margin-top: 15px; font-size: 1.1rem;">
            <span id="roundProgress">Round 1 of 6</span>
        </div>
        <button class="continue-btn" id="continueBtn">Continue to Next Round</button>
    </div>
    
    <script>
        // Vocabulary data extracted from the HTML file
        const vocabularyData = [
            { word: "poetry", definition: "Literary work in which special intensity is given to the expression of feelings and ideas through the use of distinctive style and rhythm." },
            { word: "journal", definition: "A daily record of news and events; a newspaper or magazine that deals with a particular subject." },
            { word: "instructions", definition: "Detailed information telling how something should be done, operated, or assembled." },
            { word: "portrait", definition: "A painting, drawing, or photograph of a person, especially one depicting only the face or head and shoulders." },
            { word: "portray", definition: "To depict or describe someone or something in a particular way." },
            { word: "still life", definition: "A painting or drawing of inanimate objects such as fruit or flowers.", isPhrase: true },
            { word: "landscape", definition: "All the visible features of an area of countryside or land, often considered in terms of their aesthetic appeal." },
            { word: "real life", definition: "Life as it is actually experienced, as opposed to life in fiction or fantasy.", isPhrase: true },
            { word: "paintings", definition: "The process or art of using paint to produce pictures or decorative effects." },
            { word: "rewarding", definition: "Providing satisfaction or gratification; worthwhile." },
            { word: "impressive", definition: "Evoking admiration through size, quality, or skill." },
            { word: "impressionist", definition: "An artist who paints in the style of Impressionism, characterized by small, thin brush strokes and emphasis on accurate depiction of light." },
            { word: "impressionism", definition: "A style or movement in painting originating in France in the 1860s, characterized by a concern with depicting the visual impression of the moment." },
            { word: "housed", definition: "Enclosed or contained within a structure." },
            { word: "feature", definition: "A distinctive attribute or aspect of something." },
            { word: "movement", definition: "An act of changing physical location or position; a group of people working together to advance their shared political, social, or artistic ideas." },
            { word: "wander", definition: "To walk or move in a leisurely or aimless way." },
            { word: "struck", definition: "Hit forcibly and deliberately." },
            { word: "edge", definition: "The outside limit of an object, area, or surface." },
            { word: "figure", definition: "A number, especially one that forms part of official statistics or relates to financial performance." },
            { word: "viewer", definition: "A person who looks at or inspects something; someone watching television." },
            { word: "jump out", definition: "To be immediately noticeable or striking.", isPhrase: true },
            { word: "settings", definition: "The place or type of surroundings where something is positioned or where an event takes place." },
            { word: "similarities", definition: "The state or fact of being similar." },
            { word: "like-minded", definition: "Having similar tastes or opinions.", isPhrase: true },
            { word: "absent-minded", definition: "Inattentive or forgetful.", isPhrase: true },
            { word: "strong-minded", definition: "Determined and unwavering in one's opinions or actions.", isPhrase: true },
            { word: "sought", definition: "Attempted to find or obtain something." },
            { word: "liberation", definition: "The act of setting someone free from imprisonment, slavery, or oppression." },
            { word: "liberate", definition: "To set someone free from a situation, especially imprisonment or slavery." },
            { word: "liberation army", definition: "A military force that fights for the freedom of a country or people.", isPhrase: true },
            { word: "as opposed to", definition: "In contrast to.", isPhrase: true },
            { word: "oppose", definition: "To disapprove of and attempt to prevent something." },
            { word: "opposed", definition: "In conflict or disagreement with something." },
            { word: "be opposed to", definition: "To be against something.", isPhrase: true },
            { word: "dominate", definition: "To have power and influence over others." },
            { word: "detailed", definition: "Characterized by thoroughness and attention to detail." },
            { word: "extremely", definition: "To a very great degree." },
            { word: "go to extremes", definition: "To act or be forced to act in a way that is far from moderate or normal.", isPhrase: true },
            { word: "tour guide", definition: "A person who guides visitors in the language of their choice and interprets the cultural and natural heritage of an area.", isPhrase: true },
            { word: "vision", definition: "The faculty or state of being able to see; the ability to think about or plan the future with imagination or wisdom." },
            { word: "visual", definition: "Relating to seeing or sight." },
            { word: "visually", definition: "In a way that relates to seeing or sight." },
            { word: "display", definition: "To show or exhibit something." },
            { word: "gifted", definition: "Having exceptional talent or natural ability." },
            { word: "depressed", definition: "In a state of general unhappiness or despondency." },
            { word: "calling", definition: "A strong urge toward a particular way of life or career; a vocation." },
            { word: "artworks", definition: "Works of art, especially paintings or sculptures." },
            { word: "unmixed", definition: "Not mixed or blended with any other substance." },
            { word: "result in", definition: "To have a specified end or outcome.", isPhrase: true },
            { word: "genius", definition: "Exceptional intellectual or creative power or other natural ability." },
            { word: "root word", definition: "The basic form of a word to which prefixes and suffixes may be added.", isPhrase: true },
            { word: "employment", definition: "The state of having paid work." },
            { word: "influential", definition: "Having great influence on someone or something." },
            { word: "employable", definition: "Able to be employed; fit for work." },
            { word: "be reduced to", definition: "To be brought to a weaker or less desirable state.", isPhrase: true },
            { word: "pixel", definition: "The smallest discrete component of an image or picture on a screen." },
            { word: "breeze", definition: "A gentle wind; something that is easy to accomplish." },
            { word: "linking verb", definition: "A verb that connects the subject of a sentence to a subject complement.", isPhrase: true },
            { word: "appealing", definition: "Attractive or interesting." },
            { word: "appeal to", definition: "To make a serious or urgent request; to be attractive or interesting.", isPhrase: true },
            { word: "have access to", definition: "To have the opportunity or right to use or benefit from something.", isPhrase: true },
            { word: "nothing but", definition: "Only; just.", isPhrase: true },
            { word: "photography", definition: "The art or practice of taking and processing photographs." },
            { word: "flashes", definition: "Shines brightly and briefly." },
            { word: "wage", definition: "A fixed regular payment earned for work or services." },
            { word: "campaign", definition: "A series of military operations intended to achieve a particular objective." },
            { word: "architect", definition: "A person who designs buildings and in many cases also supervises their construction." },
            { word: "architecture", definition: "The art or practice of designing and constructing buildings." },
            { word: "architectural", definition: "Relating to the art or practice of designing and constructing buildings." },
            { word: "take measures", definition: "To take action in order to achieve a particular goal.", isPhrase: true },
            { word: "give instructions", definition: "To provide information or orders about how something should be done.", isPhrase: true },
            { word: "inspired", definition: "Filled with the urge or ability to do or feel something, especially to do something creative." },
            { word: "inspiring", definition: "Having the effect of inspiring someone." },
            { word: "step by step", definition: "Proceeding gradually from one stage to the next.", isPhrase: true },
            { word: "be supposed to", definition: "To be expected or required to do something.", isPhrase: true },
            { word: "headline", definition: "A heading at the top of an article or page in a newspaper or magazine." },
            { word: "well organized", definition: "Arranged or structured in an orderly and efficient way.", isPhrase: true },
            { word: "heading", definition: "A title at the head of a page or section of a book." },
            { word: "key points", definition: "The most important or essential parts of something.", isPhrase: true },
            { word: "imperative", definition: "Of vital importance; crucial." },
            { word: "imperative mood", definition: "A grammatical mood that forms commands or requests.", isPhrase: true },
            { word: "accordingly", definition: "In a way that is appropriate to the particular circumstances." },
            { word: "scroll", definition: "A roll of parchment or paper for writing or painting on." },
            { word: "masterwork", definition: "A work of outstanding artistry, skill, or workmanship." },
            { word: "silk scroll", definition: "A painting or calligraphy done on silk.", isPhrase: true },
            { word: "insight into", definition: "An accurate and deep understanding of someone or something.", isPhrase: true },
            { word: "remarkably", definition: "In a way that is worthy of attention; strikingly." },
            { word: "currently", definition: "At the present time." },
            { word: "section", definition: "A distinct part or subdivision of something." },
            { word: "rural", definition: "In, relating to, or characteristic of the countryside rather than the town." },
            { word: "urban", definition: "In, relating to, or characteristic of a city or town." },
            { word: "wind through", definition: "To follow a twisting or spiral course.", isPhrase: true },
            { word: "ambitious", definition: "Having or showing a strong desire and determination to succeed." },
            { word: "enormous", definition: "Very large in size, quantity, or extent." },
            { word: "thanks to", definition: "Because of; owing to.", isPhrase: true },
            { word: "comprehensive", definition: "Including or dealing with all or nearly all elements or aspects of something." },
            { word: "reveal", definition: "To make known to others something that was previously secret or unknown." },
            { word: "revelation", definition: "A surprising and previously unknown fact that has been disclosed to others." },
            { word: "custom", definition: "A traditional and widely accepted way of behaving or doing something." },
            { word: "clothing", definition: "Items worn to cover the body." },
            { word: "transportation method", definition: "A means or system for conveying people or goods from one place to another.", isPhrase: true },
            { word: "business practice", definition: "A method, procedure, or process used in business.", isPhrase: true },
            { word: "a wide range of", definition: "A great variety of something.", isPhrase: true },
            { word: "temple", definition: "A building devoted to the worship of a god or gods." },
            { word: "teahouse", definition: "A small restaurant or establishment where tea and light refreshments are served." },
            { word: "at first sight", definition: "On the first impression or initial viewing.", isPhrase: true },
            { word: "overall", definition: "Taking everything into account." },
            { word: "cheerful", definition: "Noticeably happy and optimistic." },
            { word: "critic", definition: "A person who expresses an unfavorable opinion of something." },
            { word: "close inspection", definition: "Careful and thorough examination.", isPhrase: true },
            { word: "inspect", definition: "To look at something carefully in order to assess its condition or to discover any shortcomings." },
            { word: "crises", definition: "A time of intense difficulty, trouble, or danger." },
            { word: "in decline", definition: "Becoming smaller, fewer, or less; decreasing.", isPhrase: true },
            { word: "decline", definition: "To become smaller, fewer, or less; to decrease." },
            { word: "decline to do", definition: "To politely refuse to do something.", isPhrase: true },
            { word: "on the decline", definition: "In a state of gradual decrease or deterioration.", isPhrase: true },
            { word: "overthrow", definition: "The removal from power of a leader or government, especially by force." }
        ];
        
        // Game state
        let gameState = {
            playerName: '',
            currentRound: 1,
            totalRounds: 6,
            currentScore: 0,
            roundScore: 0,
            timeLeft: 90,
            usedWords: [],
            availableWords: [...vocabularyData],
            isGameActive: false,
            timerInterval: null,
            currentQuestion: null,
            questionsPerRound: 50,
            currentQuestionIndex: 0
        };
        
        // DOM elements
        const playerSetup = document.getElementById('playerSetup');
        const gameArea = document.getElementById('gameArea');
        const results = document.getElementById('results');
        const playerNameInput = document.getElementById('playerName');
        const startGameBtn = document.getElementById('startGame');
        const errorMessage = document.getElementById('errorMessage');
        const roundInfo = document.getElementById('roundInfo');
        const progressInfo = document.getElementById('progressInfo');
        const timer = document.getElementById('timer');
        const score = document.getElementById('score');
        const questionText = document.getElementById('questionText');
        const phraseHint = document.getElementById('phraseHint');
        const optionsGrid = document.getElementById('optionsGrid');
        const notification = document.getElementById('notification');
        const countdown = document.getElementById('countdown');
        const roundCompletion = document.getElementById('roundCompletion');
        const roundScore = document.getElementById('roundScore');
        const totalScore = document.getElementById('totalScore');
        const roundProgress = document.getElementById('roundProgress');
        const continueBtn = document.getElementById('continueBtn');
        const playerNameInRound = document.getElementById('playerNameInRound');
        const playerNameDisplay = document.getElementById('playerNameDisplay');
        const finalScore = document.getElementById('finalScore');
        const performanceMessage = document.getElementById('performanceMessage');
        const playAgainBtn = document.getElementById('playAgain');
        
        // Event listeners
        startGameBtn.addEventListener('click', startGame);
        playAgainBtn.addEventListener('click', resetGame);
        continueBtn.addEventListener('click', continueToNextRound);
        
        // Start game function
        function startGame() {
            const name = playerNameInput.value.trim();
            if (!name) {
                errorMessage.style.display = 'block';
                return;
            }
            
            gameState.playerName = name;
            errorMessage.style.display = 'none';
            
            // Show countdown
            showCountdown();
        }
        
        // Show countdown before starting
        function showCountdown() {
            let count = 3;
            countdown.textContent = count;
            countdown.classList.add('show');
            
            const countdownInterval = setInterval(() => {
                count--;
                if (count > 0) {
                    countdown.textContent = count;
                } else {
                    countdown.textContent = 'GO!';
                    setTimeout(() => {
                        countdown.classList.remove('show');
                        clearInterval(countdownInterval);
                        startRound();
                    }, 1000);
                }
            }, 1000);
        }
        
        // Start a new round
        function startRound() {
            playerSetup.style.display = 'none';
            gameArea.style.display = 'block';
            results.style.display = 'none';
            roundCompletion.classList.remove('show');
            
            gameState.isGameActive = true;
            gameState.timeLeft = 90;
            gameState.currentQuestion = null;
            gameState.currentQuestionIndex = 0;
            gameState.roundScore = 0; // Reset round score
            
            // Prepare words for this round
            prepareRoundWords();
            
            updateUI();
            startTimer();
            showQuestion();
        }
        
        // Update UI elements
        function updateUI() {
            roundInfo.textContent = `Round ${gameState.currentRound} of ${gameState.totalRounds}`;
            progressInfo.textContent = `Question ${gameState.currentQuestionIndex + 1} of ${gameState.questionsPerRound}`;
            timer.textContent = gameState.timeLeft;
            score.textContent = `Score: ${gameState.currentScore}`;
        }
        
        // Start timer
        function startTimer() {
            gameState.timerInterval = setInterval(() => {
                gameState.timeLeft--;
                timer.textContent = gameState.timeLeft;
                
                if (gameState.timeLeft <= 0) {
                    endRound();
                }
            }, 1000);
        }
        
        // Prepare words for current round
        function prepareRoundWords() {
            // Reset available words for this round
            gameState.availableWords = [...vocabularyData];
            
            // Remove words that have been used in previous rounds
            gameState.availableWords = gameState.availableWords.filter(word => 
                !gameState.usedWords.includes(word.word)
            );
            
            // If not enough words left, reset used words
            if (gameState.availableWords.length < gameState.questionsPerRound) {
                gameState.usedWords = [];
                gameState.availableWords = [...vocabularyData];
            }
            
            // Shuffle and take exactly the number needed for this round
            shuffleArray(gameState.availableWords);
            gameState.availableWords = gameState.availableWords.slice(0, gameState.questionsPerRound);
            
            console.log(`Round ${gameState.currentRound}: Prepared ${gameState.availableWords.length} words`);
        }
        
        // Show a new question
        function showQuestion() {
            // Check if we've completed all questions in this round
            if (gameState.currentQuestionIndex >= gameState.availableWords.length) {
                endRound();
                return;
            }
            
            // Get the current question
            gameState.currentQuestion = gameState.availableWords[gameState.currentQuestionIndex];
            
            // Display question
            questionText.textContent = gameState.currentQuestion.definition;
            
            // Show phrase hint if it's a phrase
            if (gameState.currentQuestion.isPhrase) {
                phraseHint.style.display = 'block';
            } else {
                phraseHint.style.display = 'none';
            }
            
            // Generate options
            generateOptions();
        }
        
        // Generate 4 options (1 correct, 3 incorrect)
        function generateOptions() {
            optionsGrid.innerHTML = '';
            
            const options = [gameState.currentQuestion.word];
            
            // Add 3 random incorrect options
            while (options.length < 4) {
                const randomIndex = Math.floor(Math.random() * vocabularyData.length);
                const randomWord = vocabularyData[randomIndex].word;
                if (!options.includes(randomWord)) {
                    options.push(randomWord);
                }
            }
            
            // Shuffle options
            shuffleArray(options);
            
            // Create option elements
            options.forEach(option => {
                const optionElement = document.createElement('div');
                optionElement.className = 'option';
                optionElement.innerHTML = `<div class="option-text">${option}</div>`;
                
                optionElement.addEventListener('click', () => {
                    if (gameState.isGameActive) {
                        checkAnswer(option);
                    }
                });
                
                optionsGrid.appendChild(optionElement);
            });
        }
        
        // Shuffle array
        function shuffleArray(array) {
            for (let i = array.length - 1; i > 0; i--) {
                const j = Math.floor(Math.random() * (i + 1));
                [array[i], array[j]] = [array[j], array[i]];
            }
        }
        
        // Check answer
        function checkAnswer(selectedAnswer) {
            gameState.isGameActive = false;
            
            const options = document.querySelectorAll('.option');
            const correctAnswer = gameState.currentQuestion.word;
            
            // Mark correct and incorrect answers
            options.forEach(option => {
                const optionText = option.querySelector('.option-text').textContent;
                if (optionText === correctAnswer) {
                    option.classList.add('correct');
                } else if (optionText === selectedAnswer) {
                    option.classList.add('incorrect');
                }
            });
            
            // Show notification and play sound
            if (selectedAnswer === correctAnswer) {
                showNotification('Correct! Baa! 🐑', 'correct');
                gameState.currentScore++;
                gameState.roundScore++;
                playSheepSound();
            } else {
                showNotification(`Wrong! The answer was: ${correctAnswer}`, 'incorrect');
            }
            
            // Add to used words
            gameState.usedWords.push(correctAnswer);
            
            // Move to next question immediately
            gameState.currentQuestionIndex++;
            
            // Update score immediately
            score.textContent = `Score: ${gameState.currentScore}`;
            
            // Check if we've completed all questions in this round
            if (gameState.currentQuestionIndex >= gameState.availableWords.length) {
                // Round completed, show round completion message
                setTimeout(() => {
                    showRoundCompletion();
                }, 500);
            } else {
                // Jump to next question immediately
                setTimeout(() => {
                    gameState.isGameActive = true;
                    showQuestion();
                }, 500);
            }
        }
        
        // Show notification
        function showNotification(message, type) {
            notification.textContent = message;
            notification.className = `notification ${type} show`;
            
            setTimeout(() => {
                notification.classList.remove('show');
            }, 400);
        }
        
        // Play sheep sound (using Web Audio API to create a "baa" sound)
        function playSheepSound() {
            try {
                const audioContext = new (window.AudioContext || window.webkitAudioContext)();
                const oscillator = audioContext.createOscillator();
                const gainNode = audioContext.createGain();
                
                oscillator.connect(gainNode);
                gainNode.connect(audioContext.destination);
                
                oscillator.frequency.setValueAtTime(200, audioContext.currentTime);
                oscillator.frequency.exponentialRampToValueAtTime(150, audioContext.currentTime + 0.3);
                
                gainNode.gain.setValueAtTime(0.3, audioContext.currentTime);
                gainNode.gain.exponentialRampToValueAtTime(0.01, audioContext.currentTime + 0.3);
                
                oscillator.start(audioContext.currentTime);
                oscillator.stop(audioContext.currentTime + 0.3);
            } catch (error) {
                console.log('Audio not supported');
            }
        }
        
        // Show round completion dialog
        function showRoundCompletion() {
            clearInterval(gameState.timerInterval);
            gameState.isGameActive = false;
            
            // Update round completion dialog
            playerNameInRound.textContent = gameState.playerName;
            roundScore.textContent = `Round Score: ${gameState.roundScore}/${gameState.questionsPerRound}`;
            totalScore.textContent = gameState.currentScore;
            roundProgress.textContent = `Round ${gameState.currentRound} of ${gameState.totalRounds}`;
            
            // Show the dialog
            roundCompletion.classList.add('show');
        }
        
        // Continue to next round
        function continueToNextRound() {
            if (gameState.currentRound < gameState.totalRounds) {
                // Move to next round
                gameState.currentRound++;
                startRound();
            } else {
                // Game complete
                roundCompletion.classList.remove('show');
                endGame();
            }
        }
        
        // End current round (for timer timeout)
        function endRound() {
            showRoundCompletion();
        }
        
        // End game
        function endGame() {
            clearInterval(gameState.timerInterval);
            gameState.isGameActive = false;
            
            gameArea.style.display = 'none';
            results.style.display = 'block';
            
            playerNameDisplay.textContent = `Player: ${gameState.playerName}`;
            finalScore.textContent = gameState.currentScore;
            
            // Performance message
            const percentage = (gameState.currentScore / (gameState.totalRounds * 3)) * 100; // Assuming 3 questions per round
            if (percentage >= 80) {
                performanceMessage.textContent = "Outstanding! You're a vocabulary master! 🏆";
            } else if (percentage >= 60) {
                performanceMessage.textContent = "Excellent work! Great vocabulary knowledge! 👍";
            } else if (percentage >= 40) {
                performanceMessage.textContent = "Good job! Keep practicing! 💪";
            } else {
                performanceMessage.textContent = "Keep trying! Practice makes perfect! 🌟";
            }
        }
        
        // Reset game
        function resetGame() {
            gameState = {
                playerName: gameState.playerName,
                currentRound: 1,
                totalRounds: 6,
                currentScore: 0,
                roundScore: 0,
                timeLeft: 90,
                usedWords: [],
                availableWords: [...vocabularyData],
                isGameActive: false,
                timerInterval: null,
                currentQuestion: null,
                questionsPerRound: 50,
                currentQuestionIndex: 0
            };
            
            results.style.display = 'none';
            roundCompletion.classList.remove('show');
            playerSetup.style.display = 'block';
            playerNameInput.value = gameState.playerName;
        }
    </script>
</body>
</html>